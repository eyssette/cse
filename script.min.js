const searchEngine="https://zotop.zaclys.com/search?q=",searxSearchEngine=!0,defineLang=":all";let md="# Créez votre moteur de recherche\n\n> Ce site vous permet de créer un moteur de recherche personnalisé à partir d'une liste de sites.\n> 1. Créez un fichier sur CodiMD ou sur une forge\n> 2. Ce fichier doit comporter : un titre, un bloc de citation qui constituera le message initial, et une liste de sites. Vous pouvez récupérer [ce modèle](https://codimd.apps.education.fr/b8KAltV2QQWR2rKhF_eYcg?both).\n> 3. Votre moteur de recherche sera alors disponible à l'adresse : https://eyssette.forge.aeif.fr/cse#URL (en remplaçant URL par l'URL de votre fichier)\n\n- eyssette.github.io",cseSyntax="";function getMarkdownContent(){let e=window.location.hash.substring(1);""!==e?(e.startsWith("https://github.com")&&(e=(e=e.replace("https://github.com","https://raw.githubusercontent.com")).replace("/blob/","/")),e.startsWith("https://codimd")&&-1===e.indexOf("download")&&(e=e.replace("?edit","").replace("?both","").replace("?view","")+"/download"),fetch(e).then(e=>e.text()).then(e=>{md=e,cseData=parseMarkdown(md),createCSE(cseData)}).catch(e=>console.error(e))):(cseData=parseMarkdown(md),createCSE(cseData))}function parseMarkdown(e){const t=e.split("\n");let n=[],s="Mon moteur de recherche personnalisé",i=!1,r=[],o=[];const a=/^- +(.+)/,c=new showdown.Converter({emoji:!0,parseImgDimensions:!0,simplifiedAutoLink:!0});for(let e of t)if(e.startsWith("# "))s=e.replace("# ","").trim();else if(e.startsWith(">")&&!i)e=e.replace(/^>\s?/,"").trim(),r.push(e);else{const t=e.match(a);if(t){i=!0;const e=t[1];o.push(e)}}var l;return 0==r.length&&(r=["Vous pouvez faire votre recherche ci-dessous"]),n=[s,(l=r.join("\n"),c.makeHtml(l)),o]}getMarkdownContent();const userInput=document.getElementById("search-input"),sendButton=document.getElementById("send-button"),waitMessageElement=document.getElementById("wait-message"),loaderElement=document.getElementById("loader");function createCSE(e){const t=document.getElementById("cse-title"),n=document.getElementById("initial-message"),s=document.getElementById("search");title=e[0],initialMessage=e[1],websites=e[2],t.innerHTML=title,n.innerHTML=initialMessage,cseSyntax=" (site:"+e[2].join(" OR site:")+")",s.style.visibility="visible"}function search(e){loaderElement.style.display="block",waitMessageElement.style.visibility="visible",searchText=encodeURI(e)+" "+defineLang+cseSyntax;const t=searchEngine+searchText;window.location.href=t}sendButton.addEventListener("click",()=>{search(userInput.value)}),userInput.addEventListener("keypress",e=>{"Enter"===e.key&&sendButton.click()});